{% extends "base.html" %}

{% block content %}
  <div class="content-inner">
    <section class="schedule-header">
    </section>

    <!-- New Request Form -->
    <div class="table-card" style="max-width: 560px; margin-bottom: 24px;" id="new-request-form">
      <div class="table-title">New Time Off Request</div>
      <div style="padding: 16px;">
        <form method="post" action="/timeoff/new" id="timeoff-form">
          <div style="display:grid; gap:12px;">
            <label>
              <div style="font-weight:600; margin-bottom:6px;">Employee Name</div>
              <input name="name" list="employee-list" required placeholder="Select or type name" style="width:100%;padding:8px;border:1px solid #e2e8f0;border-radius:6px;" />
              <datalist id="employee-list">
                {% for e in employees %}
                  <option value="{{ e.name }}">{{ e.name }}</option>
                {% endfor %}
              </datalist>
            </label>
            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:12px;">
              <label>
                <div style="font-weight:600; margin-bottom:6px;">From</div>
                <input type="date" name="from" required style="width:100%;padding:8px;border:1px solid #e2e8f0;border-radius:6px;" />
              </label>
              <label>
                <div style="font-weight:600; margin-bottom:6px;">To</div>
                <input type="date" name="to" required style="width:100%;padding:8px;border:1px solid #e2e8f0;border-radius:6px;" />
              </label>
            </div>
            <div style="display:flex; gap:8px;">
              <button class="btn primary" type="submit">Create</button>
            </div>
          </div>
        </form>
      </div>
    </div>

    <div class="table-card" style="max-width: 700px;">
      <div class="table-title">Requests</div>
      <div class="sidebar-inner">
        <ul class="timeoff-list">
          {% for item in time_off %}
            <li class="timeoff-item" data-id="{{ item.id }}">
              <div class="info">
                <div class="name">{{ item.name }} <span class="role">({{ item.role }})</span></div>
                <div class="dates">{{ item.label }}
                  <span class="status {{ 'approved' if item.approved else 'pending' }}" data-status>{{ '‚úîÔ∏è' if item.approved else 'pending' }}</span>
                </div>
              </div>
              <div class="actions" style="display:flex; align-items:center; gap:8px;">
                <label class="switch" title="Toggle Approved">
                  <input type="checkbox" class="timeoff-toggle" {% if item.approved %}checked{% endif %} />
                  <span class="slider"></span>
                </label>
                <span class="toggle-label" style="font-size:12px; color:#475569;">Approved</span>
                <label class="switch" title="Toggle Vacation" style="margin-left:8px;">
                  <input type="checkbox" class="timeoff-type-toggle" {% if item.vacation %}checked{% endif %} />
                  <span class="slider"></span>
                </label>
                <span class="toggle-label" style="font-size:12px; color:#475569;">Vacation</span>
                <button class="timeoff-delete" data-id="{{ item.id }}" style="margin-left: 8px; padding: 2px; background: none; border: none; font-size: 14px; cursor: pointer; opacity: 0.6; transition: opacity 0.2s;" title="Delete request" onmouseover="this.style.opacity='1'" onmouseout="this.style.opacity='0.6'">üóëÔ∏è</button>
              </div>
            </li>
          {% endfor %}
        </ul>
      </div>
    </div>
  </div>
{% endblock %}
